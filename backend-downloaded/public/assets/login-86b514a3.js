import{u as k,r as p,j as e,a as T,b as E,c as R,d as B,e as _,f as q,g as z,h as g,i as H,S as m,F as M,n as N,P as V,o as $,k as G,l as W,T as x,A as O,R as h,I as U,m as D,E as J,p as K,L as Q,G as X,W as Y}from"./index-b5422eae.js";function Z(){const[s]=k();return p.useMemo(()=>s,[s])}function ee({color:s="currentColor",size:r=24}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor","fill-rule":"evenodd",d:"M1.606 6.08a1 1 0 0 1 1.313.526L2 7l.92-.394v-.001l.003.009l.021.045l.094.194c.086.172.219.424.4.729a13.4 13.4 0 0 0 1.67 2.237a12 12 0 0 0 .59.592C7.18 11.8 9.251 13 12 13a8.7 8.7 0 0 0 3.22-.602c1.227-.483 2.254-1.21 3.096-1.998a13 13 0 0 0 2.733-3.725l.027-.058l.005-.011a1 1 0 0 1 1.838.788L22 7l.92.394l-.003.005l-.004.008l-.011.026l-.04.087a14 14 0 0 1-.741 1.348a15.4 15.4 0 0 1-1.711 2.256l.797.797a1 1 0 0 1-1.414 1.415l-.84-.84a12 12 0 0 1-1.897 1.256l.782 1.202a1 1 0 1 1-1.676 1.091l-.986-1.514c-.679.208-1.404.355-2.176.424V16.5a1 1 0 0 1-2 0v-1.544c-.775-.07-1.5-.217-2.177-.425l-.985 1.514a1 1 0 0 1-1.676-1.09l.782-1.203c-.7-.37-1.332-.8-1.897-1.257l-.84.84a1 1 0 0 1-1.414-1.414l.797-.797a15.4 15.4 0 0 1-1.87-2.519a14 14 0 0 1-.591-1.107l-.033-.072l-.01-.021l-.002-.007l-.001-.002v-.001C1.08 7.395 1.08 7.394 2 7l-.919.395a1 1 0 0 1 .525-1.314","clip-rule":"evenodd"})})}const se="/assets/maestro-logo-white-284bc286.webp",ae=N(V)(({theme:s})=>({backgroundImage:"none",backgroundColor:"#010F17",padding:"25px",boxShadow:"rgb(33 150 243 / 10%) 0px 2px 14px 0px",border:`1px solid ${s.palette.divider}`}));function re(){const{login:s,setSelectOrg:r,isLicensed:te,checkLicense:j}=T(),b=E(),o=R(),{enqueueSnackbar:i}=B(),v=_(),[l,ne]=p.useState("");Z().get("returnTo");const n=q(),w=z().shape({user_name:g().required("User Name is required"),password:g().required("Password is required")}),f={user_name:"",password:""},c=H({resolver:$(w),defaultValues:f}),{reset:y,handleSubmit:S,formState:{isSubmitting:P}}=c,I=async(a,t)=>{await(s==null?void 0:s(a,t));const d=await G();let u=null;if(d.length){u=d[0],await(r==null?void 0:r(u));const A=await j();i("Logged in successfully",{variant:"success"}),o(a==="guest@maestro"||A?"/dashboard/devices":"/about")}else v.push(W)},L=S(async a=>{try{await I(a.user_name,a.password)}catch(t){console.error(t),y(),console.log("error message--->",t.message),i("Invalid credentials",{variant:"error"})}}),C=e.jsx(m,{spacing:2,sx:{mb:5,alignItems:"center",marginBottom:b.spacing(3)},children:e.jsx("img",{src:se,alt:"logo",style:{width:"250px"}})}),F=e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h5",sx:{textAlign:"center"},children:"Duetto Analytics"}),e.jsx(x,{variant:"body1",sx:{textAlign:"center",fontWeight:"bold",marginBottom:"5px"},children:"v1.0.0"}),e.jsxs(m,{spacing:2.5,children:[!!l&&e.jsx(O,{severity:"error",children:l}),e.jsx(h,{name:"user_name",label:"User Name *"}),e.jsx(h,{name:"password",label:"Password *",type:n.value?"text":"password",InputProps:{endAdornment:e.jsx(U,{position:"end",children:e.jsx(D,{onClick:n.onToggle,edge:"end",children:n.value?e.jsx(J,{}):e.jsx(ee,{})})})}}),e.jsxs("div",{children:[e.jsx(K,{sx:{alignItems:"center",justifyContent:"center",display:"flex"},name:"remember",defaultValue:!1,label:"Remember me",color:"primary"}),e.jsx("br",{}),e.jsx(Q,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:P,children:"Sign In"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(X,{item:!0,sx:{alignItems:"center",justifyContent:"center",display:"flex"}})]})]})]});return e.jsx(ae,{elevation:3,children:e.jsxs(M,{methods:c,onSubmit:L,children:[C,F]})})}function le(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsx("title",{children:"Login"})}),e.jsx(re,{})]})}export{le as default};
